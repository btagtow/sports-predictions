{"ast":null,"code":"import _defineProperty from\"/Users/benjamintagtow/Desktop/job-search/projects/sports-predictor/sports-predictions-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/benjamintagtow/Desktop/job-search/projects/sports-predictor/sports-predictions-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/benjamintagtow/Desktop/job-search/projects/sports-predictor/sports-predictions-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/benjamintagtow/Desktop/job-search/projects/sports-predictor/sports-predictions-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/benjamintagtow/Desktop/job-search/projects/sports-predictor/sports-predictions-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';var loginURL='http://localhost:3000/login';var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:\"\",password:\"\",error:\"\"};_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.addUser=function(user){_this.props.logIn(user);};_this.handleSubmit=function(event){event.preventDefault();fetch(loginURL,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(_this.state)}).then(function(response){return response.status===200?response.json():response.status;}).then(function(result){if(result.token){_this.addUser(result.user);localStorage.setItem(\"token\",result.token);localStorage.setItem(\"user_id\",result.user_id);}else{alert(\"Username or password incorrect\");}}).catch(function(error){return _this.setState({error:error.message});});};_this.handleError=function(){return _this.state.error?/*#__PURE__*/React.createElement(\"p\",{className:\"error-message\"},_this.state.error):null;};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this$state=this.state,username=_this$state.username,password=_this$state.password;return/*#__PURE__*/React.createElement(\"div\",{className:\"form\"},/*#__PURE__*/React.createElement(\"form\",{className:\"auth-form login\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"input\",{type:\"username\",name:\"username\",value:username,placeholder:\"username\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",value:password,placeholder:\"password\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"login\",className:\"auth-button\"}),this.state.error?console.log(this.state.error):null));}}]);return Login;}(React.Component);function mapStateToProps(state){return{isLoggedIn:state.isLoggedIn};}function mapDispatchToProps(dispatch){return{logIn:function logIn(user){return dispatch({type:\"LOG_IN\",payload:user});}};}export default connect(mapStateToProps,mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/benjamintagtow/Desktop/job-search/projects/sports-predictor/sports-predictions-front/src/components/auth/forms/LoginForm.js"],"names":["React","connect","loginURL","Login","state","username","password","error","handleChange","event","target","name","value","setState","addUser","user","props","logIn","handleSubmit","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","status","json","result","token","localStorage","setItem","user_id","alert","catch","message","handleError","console","log","Component","mapStateToProps","isLoggedIn","mapDispatchToProps","dispatch","type","payload"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\n\nconst loginURL = 'http://localhost:3000/login'\n\nclass Login extends React.Component {\n    state = {\n        username: \"\",\n        password: \"\",\n        error: \"\"\n    }\n\n    handleChange = event => {\n        const { name, value } = event.target\n        this.setState({ [name] : value })\n    }\n\n    addUser = (user) => {\n        this.props.logIn(user)\n    }\n\n    handleSubmit = event => {\n        event.preventDefault()\n\n        fetch(loginURL, {\n            method: \"POST\", \n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(this.state)\n        })\n        .then(response => {\n            return response.status === 200 ? response.json() : response.status\n        })\n        .then(result => {\n            if (result.token){\n                this.addUser(result.user)\n                localStorage.setItem(\"token\", result.token) \n                localStorage.setItem(\"user_id\", result.user_id) \n            } else {\n                alert(\"Username or password incorrect\")\n            }\n                \n        }) \n\n        .catch(error => this.setState({error: error.message}))\n\n    }\n    handleError = () => {\n        return (\n            this.state.error ? <p className=\"error-message\">{this.state.error}</p> : null\n        )\n    }\n    render() {\n\n        const { username, password } = this.state\n\n        return (\n            <div className=\"form\">\n                <form className = \"auth-form login\" onSubmit={this.handleSubmit}>\n                    <input\n                        type=\"username\"\n                        name=\"username\"\n                        value={username}\n                        placeholder=\"username\"\n                        onChange = {this.handleChange}\n                    />\n                    <input\n                        type=\"password\"\n                        name=\"password\"\n                        value={password}\n                        placeholder=\"password\"\n                        onChange = {this.handleChange}\n\n                    />\n\n                    <input type=\"submit\" value=\"login\" className=\"auth-button\"/>\n                    {this.state.error ? console.log(this.state.error) : null}\n                </form>\n            </div>\n            \n        )\n    }\n}\n\nfunction mapStateToProps(state){\n    return {\n        isLoggedIn: state.isLoggedIn\n    }\n}\n\nfunction mapDispatchToProps(dispatch){\n    return {\n        logIn: (user) => dispatch({type: \"LOG_IN\", payload: user})\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n"]},"metadata":{},"sourceType":"module"}